<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextZero Hub | AI-Powered ESG Compliance</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #1a5d1a;
            --primary-dark: #0d3b0d;
            --primary-light: #4caf50;
            --secondary: #00796b;
            --accent: #8bc34a;
            --light: #f1f8e9;
            --dark: #263238;
            --gray: #455a64;
            --light-gray: #cfd8dc;
            --white: #ffffff;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --gradient: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Open Sans', sans-serif;
            color: var(--dark);
            line-height: 1.6;
            background-color: var(--light);
            overflow-x: hidden;
        }
        
        h1, h2, h3, h4, h5 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--primary-dark);
        }
        
        h1 {
            font-size: 2.5rem;
        }
        
        h2 {
            font-size: 2rem;
            position: relative;
            padding-bottom: 0.5rem;
        }
        
        h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 4px;
            background: var(--accent);
        }
        
        p {
            margin-bottom: 1.25rem;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 28px;
            background-color: var(--primary);
            color: var(--white);
            border-radius: 4px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1rem;
        }
        
        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .btn-outline {
            background: rgba(255, 255, 255, 0.25);
            border: 2px solid rgba(255, 255, 255, 0.5);
            color: var(--white);
            display: inline-block;
            padding: 12px 28px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 1rem;
        }

        .btn-outline:hover {
            background: var(--primary);
            border: 2px solid var(--primary);
            color: var(--white);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }   
        
        /* Header Styles */
        header {
            background-color: var(--white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }
        
        .logo-link {
            text-decoration: none;
            color: inherit;
        }

        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo i {
            font-size: 2rem;
            color: var(--primary);
            margin-right: 10px;
        }
        
        .logo h1 {
            font-size: 1.8rem;
            margin-bottom: 0;
            color: var(--primary-dark);
        }
        
        .nav-menu {
            display: flex;
            list-style: none;
        }
        
        .nav-menu li {
            margin-left: 30px;
        }
        
        .nav-menu a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: color 0.3s ease;
            position: relative;
        }
        
        .nav-menu a:hover {
            color: var(--primary);
        }
        
        .nav-menu a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s ease;
        }
        
        .nav-menu a:hover::after {
            width: 100%;
        }
        
        /* Hero Section */
        .hero {
            background: var(--gradient);
            color: var(--white);
            padding: 100px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(139, 195, 74, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 121, 107, 0.1) 0%, transparent 20%);
        }
        
        .hero-content {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        .hero h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--white);
        }
        
        .hero p {
            font-size: 1.25rem;
            margin-bottom: 30px;
        }
        
        .ai-tag {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-top: 15px;
            font-weight: 500;
            color: var(--white);
            text-decoration: none;
        }
        
        .ai-tag i {
            margin-right: 5px;
        }
        
        /* Section Styling */
        section {
            padding: 80px 0;
        }
        
        .section-header {
            text-align: center;
            max-width: 800px;
            margin: 0 auto 50px;
        }
        
        .section-header h2 {
            display: inline-block;
        }
        
        .section-header p {
            font-size: 1.1rem;
            color: var(--gray);
        }
        
        /* Scope Cards */
        .scopes-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }
        
        .scope-card {
            background: var(--white);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
            position: relative;
        }
        
        .scope-card:hover {
            transform: translateY(-10px);
        }
        
        .scope-header {
            padding: 25px 25px 15px;
            background: var(--primary);
            color: var(--white);
        }
        
        .scope-header h3 {
            font-size: 1.5rem;
            margin-bottom: 5px;
            color: var(--white);
        }
        
        .scope-body {
            padding: 25px;
        }
        
        .scope-list {
            list-style: none;
            margin: 20px 0;
        }
        
        .scope-list li {
            padding: 10px 0;
            border-bottom: 1px dashed var(--light-gray);
            display: flex;
            align-items: flex-start;
        }
        
        .scope-list li:last-child {
            border-bottom: none;
        }
        
        .scope-list i {
            color: var(--primary);
            margin-right: 10px;
            margin-top: 5px;
        }
        
        /* Green Lending Section */
        .green-lending {
            background-color: var(--white);
        }
        
        .process-steps {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            margin-top: 50px;
        }
        
        .step {
            flex: 0 0 calc(25% - 30px);
            text-align: center;
            padding: 30px 20px;
            position: relative;
        }
        
        .step::before {
            content: '';
            position: absolute;
            top: 75px;
            right: -15px;
            width: 30px;
            height: 2px;
            background: var(--light-gray);
        }
        
        .step:last-child::before {
            display: none;
        }
        
        .step-number {
            width: 50px;
            height: 50px;
            background: var(--primary);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0 auto 20px;
        }
        
        .step h4 {
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        /* Resources Section */
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .resource-card {
            background: var(--white);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
        }
        
        .resource-card:hover {
            transform: translateY(-5px);
        }
        
        .resource-icon {
            background: var(--primary-light);
            color: var(--white);
            font-size: 2.5rem;
            padding: 30px;
            text-align: center;
        }
        
        .resource-content {
            padding: 25px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .resource-content h3 {
            color: var(--primary-dark);
        }
        
        .resource-content .btn {
            margin-top: auto;
            align-self: flex-start;
        }
        
        /* Calculator Section */
        .calculator {
            background: var(--gradient);
            color: var(--white);
        }
        
        .calculator-container {
            display: flex;
            flex-wrap: wrap;
            align-items: flex-start;
            gap: 50px;
            padding: 0 20px;
        }
        
        .calculator-content {
            flex: 1 1 400px;
            position: relative;
        }
        
        .calculator-form-container {
            flex: 1 1 400px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 8px;
        }

        .calculator-content h2, .calculator-content h3 {
            color: var(--white);
        }

        .calculator-content h2::after {
            background: var(--accent);
        }

        .calculator .scope-list li {
            color: var(--white);
        }
        
        .calculator .scope-list i {
            color: var(--white);
            opacity: 0.8;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-group input, 
        .form-group select,
        .scope-panel input,
        .scope-panel select {
            width: 100%;
            padding: 12px;
            border-radius: 4px;
            border: none;
            background: rgba(255, 255, 255, 0.9);
        }
        
        /* AI Features Section */
        .ai-features {
            background-color: var(--white);
        }
        
        .ai-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: center;
        }
        
        .ai-content {
            padding: 20px;
        }
        
        .ai-visual {
            background: var(--light);
            border-radius: 8px;
            padding: 30px;
            height: 400px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: var(--shadow);
        }
        
        .chart-container {
            width: 100%;
            height: 100%;
        }
        
        /* Contact Section */
        .contact-form {
            max-width: 800px;
            margin: 0 auto;
            background: var(--white);
            padding: 40px;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
        
        /* Footer */
        footer {
            background: var(--dark);
            color: var(--light-gray);
            padding: 60px 0 30px;
        }
        
        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .footer-col h3 {
            color: var(--white);
            margin-bottom: 20px;
            font-size: 1.4rem;
        }
        
        .footer-col ul {
            list-style: none;
        }
        
        .footer-col ul li {
            margin-bottom: 12px;
        }
        
        .footer-col ul li a {
            color: var(--light-gray);
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-col ul li a:hover {
            color: var(--accent);
        }
        
        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
        }
        
        /* Responsive Design */
        @media (max-width: 992px) {
            .step {
                flex: 0 0 calc(50% - 30px);
                margin-bottom: 30px;
            }
            
            .step::before {
                display: none;
            }
            
            .ai-container {
                grid-template-columns: 1fr;
            }
            .calculator-container {
                flex-direction: column;
            }
        }
        
        @media (max-width: 768px) {
            .nav-menu {
                display: none;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .step {
                flex: 0 0 100%;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Mobile Menu */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--dark);
            cursor: pointer;
        }
        
        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animated {
            animation: fadeIn 0.6s ease-out forwards;
        }
        
        .delay-1 {
            animation-delay: 0.2s;
        }
        
        .delay-2 {
            animation-delay: 0.4s;
        }
        
        .delay-3 {
            animation-delay: 0.6s;
        }
        
        /* Results Modal - FIXED */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow: auto;
        }
        
        .modal-content {
            background: var(--white);
            padding: 40px;
            border-radius: 8px;
            max-width: 900px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            margin: 30px auto;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            background: none;
            border: none;
            cursor: pointer;
            color: var(--gray);
            z-index: 10;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .results-card-container.hidden {
            display: none;
        }

        .result-card {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .result-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary);
            margin: 10px 0;
        }
        
        .progress-container {
            height: 10px;
            background: var(--light-gray);
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: var(--primary);
            border-radius: 5px;
        }
        
        /* AI Analysis Section */
        .ai-analysis {
            margin: 30px 0;
            padding: 20px;
            background: rgba(139, 195, 74, 0.1);
            border-radius: 8px;
        }
        
        .ai-analysis h3 {
            color: var(--primary);
            display: flex;
            align-items: center;
        }
        
        .ai-analysis h3 i {
            margin-right: 10px;
        }
        
        .insights-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .insight-card {
            background: var(--white);
            padding: 15px;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }
        
        .insight-card h4 {
            color: var(--secondary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .insight-card h4 i {
            margin-right: 8px;
            color: var(--accent);
        }
        
        /* FIXED: Larger prediction chart */
        .prediction-chart {
            height: 300px;
            margin-top: 20px;
            position: relative;
        }
        
        /* New: Form validation styles */
        .form-group .error {
            color: #e74c3c;
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
        }
        
        .form-group.invalid input,
        .form-group.invalid select {
            border: 1px solid #e74c3c;
        }
        
        .form-group.invalid .error {
            display: block;
        }

        /* ADDED: Helper text styles */
        .form-helper {
            display: block;
            margin-top: 5px;
            font-size: 0.85rem;
            color: var(--light);
            opacity: 0.8;
        }

        /* — Scope Tabs & Panels — */
.scope-tabs {
  display: flex;
  justify-content: center;
  margin-bottom: 20px;
}
.scope-tab {
  padding: 8px 16px;
  margin: 0 6px;
  background: var(--primary-light);
  color: var(--white);
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-weight: 600;
}
.scope-tab.active,
.scope-tab:hover {
  background: var(--primary);
}
.scope-panel {
  display: none;
}
.scope-panel.active {
  display: block;
}

        /* Increased form group spacing */
        .form-group {
            margin-bottom: 25px;
        }

        
        /* Admin Panel */
        .admin-panel {
            background: #f8f9fa;
            padding: 40px 0;
            min-height: 100vh;
        }
        
        .admin-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .admin-header {
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-tabs {
            display: flex;
            border-bottom: 1px solid #dee2e6;
            margin-bottom: 20px;
        }
        
        .admin-tab {
            padding: 10px 20px;
            cursor: pointer;
            border: 1px solid transparent;
            border-bottom: none;
            background: none;
            font-weight: 500;
        }
        
        .admin-tab.active {
            background: white;
            border-color: #dee2e6;
            border-radius: 5px 5px 0 0;
        }
        
        .admin-content {
            background: white;
            border-radius: 5px;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
            padding: 20px;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .admin-table th,
        .admin-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }
        
        .admin-table th {
            background-color: #f8f9fa;
            font-weight: 600;
        }
        
        .admin-table tr:hover {
            background-color: #f8f9fa;
        }
        
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            text-align: center;
        }
        
        .stat-card .value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin: 10px 0;
        }
        
        .stat-card .label {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        /* Login form */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: var(--light);
        }
        
        .login-form {
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 450px;
        }
        
        .login-form h2 {
            text-align: center;
            margin-bottom: 30px;
        }

        .ai-tag:hover {
            cursor: pointer;
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .contact-form textarea {
            width: 100%;
            max-width: 100%;
            min-height: 120px;
            resize: vertical;
        }

    </style>
</head>
<body>
    <section id="admin-panel" class="admin-panel" style="display: none;">
        <div class="admin-container">
            <div class="admin-header">
                <h2>ESG Compliance Dashboard</h2>
                <button class="btn" id="back-to-main">Back to Main Site</button>
            </div>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <div class="icon"><i class="fas fa-building fa-2x"></i></div>
                    <div class="value" id="banks-count">12</div>
                    <div class="label">Registered Banks</div>
                </div>
                <div class="stat-card">
                    <div class="icon"><i class="fas fa-leaf fa-2x"></i></div>
                    <div class="value" id="reports-count">48</div>
                    <div class="label">ESG Reports</div>
                </div>
                <div class="stat-card">
                    <div class="icon"><i class="fas fa-chart-line fa-2x"></i></div>
                    <div class="value" id="avg-score">76%</div>
                    <div class="label">Avg. Compliance</div>
                </div>
                <div class="stat-card">
                    <div class="icon"><i class="fas fa-coins fa-2x"></i></div>
                    <div class="value">£2.8B</div>
                    <div class="label">Green Finance Managed</div>
                </div>
            </div>
            
            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="banks">Banks</button>
                <button class="admin-tab" data-tab="reports">Reports</button>
                <button class="admin-tab" data-tab="regulations">Regulations</button>
                <button class="admin-tab" data-tab="users">Users</button>
            </div>
            
            <div class="admin-content">
                <div class="tab-content" id="banks-content">
                    <h3>Registered Financial Institutions</h3>
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Bank Name</th>
                                <th>Location</th>
                                <th>Assets (£B)</th>
                                <th>Last Report</th>
                                <th>Compliance</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>London Community Bank</td>
                                <td>London, UK</td>
                                <td>£1.2</td>
                                <td>2023-10-15</td>
                                <td>82%</td>
                                <td>
                                    <button class="btn btn-outline" style="padding: 5px 10px; font-size: 0.8rem;">View</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Manchester Mutual</td>
                                <td>Manchester, UK</td>
                                <td>£0.8</td>
                                <td>2023-09-28</td>
                                <td>75%</td>
                                <td>
                                    <button class="btn btn-outline" style="padding: 5px 10px; font-size: 0.8rem;">View</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Scottish Green Bank</td>
                                <td>Edinburgh, UK</td>
                                <td>£1.5</td>
                                <td>2023-10-22</td>
                                <td>88%</td>
                                <td>
                                    <button class="btn btn-outline" style="padding: 5px 10px; font-size: 0.8rem;">View</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Wales Ethical Finance</td>
                                <td>Cardiff, UK</td>
                                <td>£0.6</td>
                                <td>2023-10-05</td>
                                <td>69%</td>
                                <td>
                                    <button class="btn btn-outline" style="padding: 5px 10px; font-size: 0.8rem;">View</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="reports-content" style="display: none;">
                    <h3>ESG Compliance Reports</h3>
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Report ID</th>
                                <th>Bank</th>
                                <th>Period</th>
                                <th>Scope 1</th>
                                <th>Scope 2</th>
                                <th>Scope 3</th>
                                <th>Score</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ESG-2023-001</td>
                                <td>London Community Bank</td>
                                <td>Q3 2023</td>
                                <td>1,200 tCO2e</td>
                                <td>3,500 tCO2e</td>
                                <td>15,000 tCO2e</td>
                                <td>82%</td>
                            </td>
                            <tr>
                                <td>ESG-2023-002</td>
                                <td>Manchester Mutual</td>
                                <td>Q3 2023</td>
                                <td>800 tCO2e</td>
                                <td>2,800 tCO2e</td>
                                <td>12,000 tCO2e</td>
                                <td>75%</td>
                            </tr>
                            <tr>
                                <td>ESG-2023-003</td>
                                <td>Scottish Green Bank</td>
                                <td>Q3 2023</td>
                                <td>950 tCO2e</td>
                                <td>2,600 tCO2e</td>
                                <td>10,500 tCO2e</td>
                                <td>88%</td>
                            </tr>
                            <tr>
                                <td>ESG-2023-004</td>
                                <td>Wales Ethical Finance</td>
                                <td>Q3 2023</td>
                                <td>1,100 tCO2e</td>
                                <td>3,200 tCO2e</td>
                                <td>16,500 tCO2e</td>
                                <td>69%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>
    
    <section id="login-section" class="login-container" style="display: none;">
        <div class="login-form">
            <h2>Admin Login</h2>
            <form id="admin-login-form">
                <div class="form-group">
                    <label for="admin-email">Email Address</label>
                    <input type="email" id="admin-email" placeholder="admin@nextzerohub.co.uk" required>
                </div>
                <div class="form-group">
                    <label for="admin-password">Password</label>
                    <input type="password" id="admin-password" placeholder="Enter your password" required>
                </div>
                <button type="submit" class="btn" style="width: 100%; margin-bottom: 15px;">Login</button> <button type="button" class="btn" id="login-back-to-main" style="width: 100%;">Back to Main Site</button>
            </form>
        </div>
    </section>
    
    <div id="main-app">
        <header>
            <div class="container header-container">
                <a href="#" class="logo-link">
                    <div class="logo">
                        <i class="fas fa-leaf"></i>
                        <h1>NextZero Hub</h1>
                    </div>
                </a>
                <ul class="nav-menu">
                    <li><a href="#scopes">Scopes</a></li>
                    <li><a href="#green-lending">Green Lending</a></li>
                    <li><a href="#ai-features">AI Analysis</a></li>
                    <li><a href="#calculator">Calculator</a></li>
                    <li><a href="#contact">Contact</a></li>
                    <li><a href="#" id="admin-login-link">Admin Login</a></li>
                </ul>
                <button class="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </header>

        <section class="hero">
            <div class="container hero-content">
                <h1>AI-Powered ESG Solutions for UK Small Banks</h1>
                <p>NextZero Hub provides advanced ESG compliance solutions with AI-driven insights for Scope 1, 2 & 3 emissions and predictive green lending analytics.</p>
                <a href="#calculator" class="btn">Calculate Your ESG Impact</a>
                <a href="#contact" class="btn btn-outline">Request Demo</a>
                <a href="#ai-features" class="ai-tag">
                    <i class="fas fa-brain"></i> AI-Powered Predictive Analytics
                </a>
            </div>
        </section>

        <section id="scopes">
            <div class="container">
                <div class="section-header animated">
                    <h2>Advanced Emissions Scopes Analysis</h2>
                    <p>GHG Protocol classifications with AI-enhanced measurement for UK banking institutions</p>
                </div>

                <div class="scopes-container">
                    <div class="scope-card animated delay-1">
                        <div class="scope-header">
                            <h3>Scope 1</h3>
                            <p>Direct Emissions</p>
                        </div>
                        <div class="scope-body">
                            <p>Emissions from sources that are owned or controlled by the bank.</p>
                            <ul class="scope-list">
                                <li><i class="fas fa-building"></i> On-site fuel combustion</li>
                                <li><i class="fas fa-car"></i> Company vehicles</li>
                                <li><i class="fas fa-fire"></i> Fugitive emissions</li>
                                <li><i class="fas fa-laptop-house"></i> Branch operations</li>
                            </ul>
                            <p><strong>UK Compliance Focus:</strong> Energy efficiency in branches, fleet electrification, refrigerant management.</p>
                        </div>
                    </div>

                    <div class="scope-card animated delay-2">
                        <div class="scope-header">
                            <h3>Scope 2</h3>
                            <p>Indirect Energy Emissions</p>
                        </div>
                        <div class="scope-body">
                            <p>Emissions from the generation of purchased electricity consumed by the bank.</p>
                            <ul class="scope-list">
                                <li><i class="fas fa-plug"></i> Purchased electricity</li>
                                <li><i class="fas fa-snowflake"></i> Heating and cooling</li>
                                <li><i class="fas fa-lightbulb"></i> Lighting systems</li>
                                <li><i class="fas fa-server"></i> Data center operations</li>
                            </ul>
                            <p><strong>UK Compliance Focus:</strong> Renewable energy procurement, PPA agreements, energy efficiency certificates.</p>
                        </div>
                    </div>

                    <div class="scope-card animated delay-3">
                        <div class="scope-header">
                            <h3>Scope 3</h3>
                            <p>Value Chain Emissions</p>
                        </div>
                        <div class="scope-body">
                            <p>All other indirect emissions in the value chain, including financed emissions.</p>
                            <ul class="scope-list">
                                <li><i class="fas fa-hand-holding-usd"></i> Financed emissions</li>
                                <li><i class="fas fa-truck"></i> Supply chain activities</li>
                                <li><i class="fas fa-plane"></i> Business travel</li>
                                <li><i class="fas fa-box"></i> Waste disposal</li>
                            </ul>
                            <p><strong>UK Compliance Focus:</strong> Portfolio carbon measurement, green lending criteria, supplier engagement.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="green-lending" class="green-lending">
            <div class="container">
                <div class="section-header animated">
                    <h2>AI-Enhanced Green Lending</h2>
                    <p>Machine learning models to optimize sustainable finance practices aligned with UK regulations</p>
                </div>

                <div class="process-steps">
                    <div class="step animated">
                        <div class="step-number">1</div>
                        <h4>AI Framework Development</h4>
                        <p>Machine learning models to establish optimal green lending criteria aligned with UK Taxonomy</p>
                    </div>
                    <div class="step animated delay-1">
                        <div class="step-number">2</div>
                        <h4>Predictive Client Assessment</h4>
                        <p>AI algorithms to forecast borrower ESG performance using historical data and market trends</p>
                    </div>
                    <div class="step animated delay-2">
                        <div class="step-number">3</div>
                        <h4>Smart Loan Structuring</h4>
                        <p>AI-driven optimization of sustainability-linked loan products with dynamic terms</p>
                    </div>
                    <div class="step animated delay-3">
                        <div class="step-number">4</div>
                        <h4>Automated Impact Reporting</h4>
                        <p>AI-powered measurement and forecasting of environmental impact for financed projects</p>
                    </div>
                </div>

                <div style="background: var(--light); padding: 30px; border-radius: 8px; margin-top: 50px;" class="animated">
                    <h3><i class="fas fa-robot"></i> AI Regulatory Compliance</h3>
                    <p>Our machine learning models ensure continuous alignment with evolving UK regulations:</p>
                    <ul class="scope-list" style="margin-top: 20px;">
                        <li><i class="fas fa-check-circle" style="color: var(--primary);"></i> TCFD compliance automation</li>
                        <li><i class="fas fa-check-circle" style="color: var(--primary);"></i> SECR reporting optimization</li>
                        <li><i class="fas fa-check-circle" style="color: var(--primary);"></i> Real-time UK Green Taxonomy alignment</li>
                        <li><i class="fas fa-check-circle" style="color: var(--primary);"></i> FCA SDR predictive compliance</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="ai-features" class="ai-features">
            <div class="container">
                <div class="section-header animated">
                    <h2>Predictive ESG Analytics</h2>
                    <p>AI-powered insights for smarter ESG strategy and portfolio optimization</p>
                </div>

                <div class="ai-container">
                    <div class="ai-content">
                        <h3>Machine Learning for Green Lending</h3>
                        <p>Our proprietary AI models analyze your portfolio to identify optimization opportunities and predict future ESG performance.</p>
                        
                        <div class="ai-analysis">
                            <h3><i class="fas fa-chart-line"></i> Portfolio Optimization Insights</h3>
                            <div class="insights-container">
                                <div class="insight-card">
                                    <h4><i class="fas fa-seedling"></i> Green Portfolio Growth</h4>
                                    <p>AI predicts 25-40% growth potential in your green lending portfolio over the next 3 years.</p>
                                </div>
                                <div class="insight-card">
                                    <h4><i class="fas fa-exclamation-triangle"></i> Carbon Risk Exposure</h4>
                                    <p>17% of your current portfolio is in high-carbon sectors requiring transition planning.</p>
                                </div>
                                <div class="insight-card">
                                    <h4><i class="fas fa-pound-sign"></i> ROI Projection</h4>
                                    <p>Predicts 15-22% higher returns on green investments compared to traditional portfolios.</p>
                                </div>
                                <div class="insight-card">
                                    <h4><i class="fas fa-trophy"></i> Compliance Forecasting</h4>
                                    <p>98% accuracy in predicting future regulatory requirements and compliance gaps.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ai-visual">
                        <div class="chart-container">
                            <canvas id="ai-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="calculator" class="calculator">
            <div class="container calculator-container">
                <div class="calculator-content animated">
                    <h2>Advanced ESG Impact Calculator</h2>
                    <p>AI-powered estimation of your bank's carbon footprint and ESG compliance score with predictive insights.</p>
                    <p>Our specialized calculator incorporates UK-specific emissions factors and machine learning algorithms for accurate forecasting.</p>
                    <div style="margin-top: 30px;">
                        <h3>Key Metrics Calculated:</h3>
                        <ul class="scope-list" style="color: var(--white);">
                            <li><i class="fas fa-check"></i> Scope 1 & 2 emissions intensity</li>
                            <li><i class="fas fa-check"></i> Financed emissions (Scope 3)</li>
                            <li><i class="fas fa-check"></i> Green asset ratio</li>
                            <li><i class="fas fa-check"></i> ESG risk exposure</li>
                            <li><i class="fas fa-check"></i> 3-year emissions forecast</li>
                        </ul>
                    </div>
                </div>

                <div class="calculator-form-container animated delay-1">
                    <div class="scope-tabs">
                        <button class="scope-tab active" data-scope="summary">Summary</button>
                        <button class="scope-tab" data-scope="1">Scope 1</button>
                        <button class="scope-tab" data-scope="2">Scope 2</button>
                        <button class="scope-tab" data-scope="3">Scope 3</button>
                    </div>
                    <div class="scope-panels">
                        <div id="scope-summary-panel" class="scope-panel active">
                            <div class="form-group">
                                <label for="energy">Annual Electricity Consumption (kWh)</label>
                                <input type="number" id="energy" placeholder="Enter consumption" required>
                                <small class="form-helper">Typical UK bank: 500,000-2M kWh/year</small>
                            </div>
                            <div class="form-group">
                                <label for="fleet">Company Vehicle Fleet Size</label>
                                <input type="number" id="fleet" placeholder="Number of vehicles" required>
                                <small class="form-helper">Include all company-owned vehicles</small>
                            </div>
                            <div class="form-group">
                                <label for="portfolio">Total Loan Portfolio (£ million)</label>
                                <input type="number" id="portfolio" placeholder="Portfolio value" required>
                                <small class="form-helper">Total value of outstanding loans</small>
                            </div>
                            <div class="form-group">
                                <label for="scope3-type">Scope 3 Category</label>
                                <select id="scope3-type" required>
                                    <option value="financed">Financed Emissions</option>
                                    <option value="travel">Business Travel</option>
                                    <option value="supply">Supply Chain</option>
                                    <option value="waste">Waste Management</option>
                                    <option value="other">Other Indirect</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label id="scope3-value-label" for="scope3-value">Carbon Intensity Factor</label>
                                <input type="number" id="scope3-value" placeholder="Enter tCO₂e per £ million" required>
                                <small id="scope3-helper" class="form-helper">
                                    Metric tons CO₂e per £ million financed
                                </small>
                            </div>
                            <div class="form-group">
                                <label for="green-percentage">Percentage of Green Loans</label>
                                <select id="green-percentage" required>
                                    <option value="0.1">0-10%</option>
                                    <option value="0.25">11-25%</option>
                                    <option value="0.5" selected>26-50%</option>
                                    <option value="0.75">51-75%</option>
                                    <option value="1">76-100%</option>
                                </select>
                                <small class="form-helper">Loans aligned with UK Green Taxonomy</small>
                            </div>
                        </div>
                        <div id="scope-1-panel" class="scope-panel">
                            <div class="form-group">
                                <label for="csv-input-1">Or Upload Your Emission Data (.csv)</label>
                                <input type="file" id="csv-input-1" accept=".csv">
                                <small class="form-helper">
                                    CSV columns: <strong>Fuel Type</strong>, <strong>Quantity</strong>
                                </small>
                            </div>
                            <div class="form-group">
                                <label for="diesel-1">Diesel Consumed (L)</label>
                                <input type="number" id="diesel-1" placeholder="Enter litres">
                            </div>
                            <div class="form-group">
                                <label for="petrol-1">Petrol Consumed (L)</label>
                                <input type="number" id="petrol-1" placeholder="Enter litres">
                            </div>
                            <div class="form-group">
                                <label for="lpg-1">LPG Consumed (L)</label>
                                <input type="number" id="lpg-1" placeholder="Enter litres">
                            </div>
                            <div class="form-group">
                                <label for="natural-gas-1">Natural Gas (kWh)</label>
                                <input type="number" id="natural-gas-1" placeholder="Enter kWh">
                            </div>
                            <div class="form-group">
                                <label for="refrigerant-type-1">Refrigerant Type</label>
                                <select id="refrigerant-type-1">
                                    <option value="r410a">R-410A</option>
                                    <option value="r134a">R-134a</option>
                                    <option value="r32">R-32</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="refrigerant-value-1">Refrigerant Quantity (kg)</label>
                                <input type="number" id="refrigerant-value-1" placeholder="Enter kg">
                            </div>
                        </div>
            
                        <div id="scope-2-panel" class="scope-panel">
                            <div class="form-group">
                                <label for="csv-input-2">Or Upload Your Energy Data (.csv)</label>
                                <input type="file" id="csv-input-2" accept=".csv">
                                <small class="form-helper">
                                    CSV columns: <strong>Energy Type</strong>, <strong>Quantity</strong>
                                </small>
                            </div>
                            <div class="form-group">
                                <label for="energy-2">Annual Electricity (kWh)</label>
                                <input type="number" id="energy-2" placeholder="Enter consumption">
                            </div>
                        </div>
            
                        <div id="scope-3-panel" class="scope-panel">
                            <div class="form-group">
                                <label for="csv-input-3">Or Upload Your Loan Data (.csv)</label>
                                <input type="file" id="csv-input-3" accept=".csv">
                                <small class="form-helper">
                                    CSV columns: <strong>Category</strong>, <strong>Value</strong>
                                </small>
                            </div>
                            <div class="form-group">
                                <label for="portfolio-3">Total Loan Portfolio (£ m)</label>
                                <input type="number" id="portfolio-3" placeholder="Enter value">
                            </div>
                            <div class="form-group">
                                <label for="scope3-type-3">Scope 3 Category</label>
                                <select id="scope3-type-3">
                                    <option value="financed">Financed Emissions</option>
                                    <option value="travel">Business Travel</option>
                                    <option value="supply">Supply Chain</option>
                                    <option value="waste">Waste Management</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label id="scope3-value-3-label" for="scope3-value-3">Metric Value</label>
                                <input type="number" id="scope3-value-3" placeholder="Enter metric">
                                <small id="scope3-helper-3" class="form-helper">
                                </small>
                            </div>
                            <div class="form-group">
                                <label for="green-percentage-3">Green Loans %</label>
                                <select id="green-percentage-3">
                                    <option value="0.1">0–10%</option>
                                    <option value="0.25">11–25%</option>
                                    <option value="0.5">26–50%</option>
                                    <option value="0.75">51–75%</option>
                                    <option value="1">76–100%</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div style="text-align:center; margin-top:30px;">
                        <button id="calculate-btn" class="btn">Calculate ESG Impact</button>
                    </div>
                </div>
            </div>
        </section>
          
        <section id="contact">
            <div class="container">
                <div class="section-header animated">
                    <h2>Contact Our ESG Specialists</h2>
                    <p>Get personalized guidance on implementing AI-powered ESG compliance in your bank.</p>
                </div>
                <div class="contact-form animated delay-1">
                    <form id="contact-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="name">Full Name</label>
                                <input type="text" id="name" placeholder="Enter your name" required>
                            </div>
                            <div class="form-group">
                                <label for="bank">Bank Name</label>
                                <input type="text" id="bank" placeholder="Your bank's name" required>
                            </div>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="email">Email Address</label>
                                <input type="email" id="email" placeholder="Enter your email" required>
                            </div>
                            <div class="form-group">
                                <label for="phone">Phone Number</label>
                                <input type="tel" id="phone" placeholder="Enter your phone" required>
                            </div>
                        </div>
                        <div class="form-group full-width">
                            <label for="message">How can we assist you?</label>
                            <textarea id="message" rows="5" placeholder="Describe your ESG compliance needs" required></textarea>
                        </div>
                        <button type="submit" class="btn">Request AI Consultation</button>
                    </form>
                </div>
            </div>
        </section>

        <footer>
            <div class="container">
                <div class="footer-grid">
                    <div class="footer-col">
                        <a href="#" class="logo-link">
                            <div class="logo">
                                <i class="fas fa-leaf"></i>
                                <h3>NextZero Hub</h3>
                            </div>
                        </a>
                        <p>AI-powered ESG compliance solutions for small and medium-sized banks in the United Kingdom.</p>
                        <p style="margin-top: 20px;">London | Manchester | Edinburgh</p>
                    </div>
                    <div class="footer-col">
                        <h3>Our Services</h3>
                        <ul>
                            <li><a href="#scopes">AI Emissions Management</a></li>
                            <li><a href="#green-lending">Predictive Green Lending</a></li>
                            <li><a href="#">Automated ESG Reporting</a></li>
                            <li><a href="#">Regulatory Compliance AI</a></li>
                            <li><a href="#">AI Training & Workshops</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h3>AI Resources</h3>
                        <ul>
                            <li><a href="#">UK ESG AI Models</a></li>
                            <li><a href="#">Predictive Analytics</a></li>
                            <li><a href="#">ML Case Studies</a></li>
                            <li><a href="#">AI Insights Blog</a></li>
                            <li><a href="#">Research Portal</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h3>Contact Us</h3>
                        <ul>
                            <li><i class="fas fa-envelope"></i> ai@nextzerohub.co.uk</li>
                            <li><i class="fas fa-phone"></i> +44 (0)20 7123 4567</li>
                            <li><i class="fas fa-map-marker-alt"></i> 123 Sustainable Way, London EC1A 1AA</li>
                        </ul>
                        <div style="margin-top: 20px;">
                            <a href="https://www.linkedin.com/" target="_blank" style="color: var(--light-gray); margin-right: 15px; font-size: 1.2rem;"><i class="fab fa-linkedin"></i></a>
                            <a href="https://twitter.com/" target="_blank" style="color: var(--light-gray); margin-right: 15px; font-size: 1.2rem;"><i class="fab fa-twitter"></i></a>
                            <a href="https://github.com/" target="_blank" style="color: var(--light-gray); font-size: 1.2rem;"><i class="fab fa-github"></i></a>
                        </div>
                    </div>
                </div>
                <div class="copyright">
                    <p>&copy; 2025 NextZero Hub. All rights reserved. | AI-powered ESG solutions for UK banks | Compliant with FCA, PRA and UK ESG regulations</p>
                </div>
            </div>
        </footer>

        <div class="modal" id="results-modal">
            <div class="modal-content">
                <button class="close-btn" id="close-modal">&times;</button>
                <h2>Your AI-Powered ESG Impact Analysis</h2>
                <p>Based on your inputs, our machine learning models have generated these insights:</p>
                
                <div class="results-grid">
                    <div id="scope1-card" class="results-card-container">
                        <div class="result-card">
                            <h4>Scope 1 Emissions</h4>
                            <div class="result-value" id="scope1-result">0 tCO2e</div>
                            <p>Direct emissions from operations</p>
                        </div>
                    </div>
                    <div id="scope2-card" class="results-card-container">
                        <div class="result-card">
                            <h4>Scope 2 Emissions</h4>
                            <div class="result-value" id="scope2-result">0 tCO2e</div>
                            <p>Indirect energy emissions</p>
                        </div>
                    </div>
                    <div id="scope3-card" class="results-card-container">
                        <div class="result-card">
                            <h4>Scope 3 Emissions</h4>
                            <div class="result-value" id="scope3-result">0 tCO2e</div>
                            <p>Value chain emissions</p>
                        </div>
                    </div>
                    <div id="green-score-card" class="results-card-container">
                        <div class="result-card">
                            <h4>Green Portfolio Score</h4>
                            <div class="result-value" id="green-score">0%</div>
                            <p>Sustainable lending ratio</p>
                        </div>
                    </div>
                </div>
                
                <div style="margin: 30px 0;">
                    <h4>Your ESG Compliance Rating</h4>
                    <div class="progress-container">
                        <div class="progress-bar" id="compliance-bar" style="width: 0%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                        <span>Needs Improvement</span>
                        <span>Excellent</span>
                    </div>
                </div>
                
                <div class="ai-analysis">
                    <h3><i class="fas fa-brain"></i> AI Portfolio Insights</h3>
                    <div class="insights-container">
                        <div class="insight-card">
                            <h4><i class="fas fa-seedling"></i> Green Growth Potential</h4>
                            <p>AI predicts a 32% increase in green lending opportunities in your portfolio over the next 18 months.</p>
                        </div>
                        <div class="insight-card">
                            <h4><i class="fas fa-exclamation-triangle"></i> Carbon Risk Exposure</h4>
                            <p>17% of your current portfolio is in high-carbon sectors requiring transition planning.</p>
                        </div>
                        <div class="insight-card">
                            <h4><i class="fas fa-trend-up"></i> Emissions Forecast</h4>
                            <p>Projected 22% reduction in Scope 3 emissions with optimized lending practices.</p>
                        </div>
                        <div class="insight-card">
                            <h4><i class="fas fa-chart-pie"></i> Portfolio Optimization</h4>
                            <p>AI recommends shifting 28% of portfolio to green assets for maximum ESG impact.</p>
                        </div>
                    </div>
                    <div class="prediction-chart">
                        <canvas id="prediction-chart"></canvas>
                    </div>
                </div>
                
                <p style="text-align: center; margin-top: 20px;">
                    <a href="#contact" class="btn" id="contact-btn">Optimize with AI Solutions</a>
                </p>
            </div>
        </div>
    </div>

    <script>
        // Database simulation with localStorage
        const ESGDatabase = {
            init: function() {
                if (!localStorage.getItem('esg_banks')) {
                    localStorage.setItem('esg_banks', JSON.stringify([
                        { id: 1, name: "London Community Bank", contact: "sarah.johnson@lcb.co.uk", assets: 1.2, lastReport: "2023-10-15", compliance: 82 },
                        { id: 2, name: "Manchester Mutual",      contact: "david.wilson@manmutual.co.uk", assets: 0.8, lastReport: "2023-09-28", compliance: 75 },
                        { id: 3, name: "Scottish Green Bank",    contact: "fiona.macdonald@scotgreen.co.uk", assets: 1.5, lastReport: "2023-10-22", compliance: 88 },
                        { id: 4, name: "Wales Ethical Finance",  contact: "thomas.evans@walesethical.co.uk", assets: 0.6, lastReport: "2023-10-05", compliance: 69 }
                    ]));
                }
                if (!localStorage.getItem('esg_reports')) {
                    localStorage.setItem('esg_reports', JSON.stringify([
                        { id: "ESG-2023-001", bankId:1, period:"Q3 2023", scope1:1200, scope2:3500, scope3:15000, score:82 },
                        { id: "ESG-2023-002", bankId:2, period:"Q3 2023", scope1:800,  scope2:2800, scope3:12000, score:75 },
                        { id: "ESG-2023-003", bankId:3, period:"Q3 2023", scope1:950,  scope2:2600, scope3:10500, score:88 },
                        { id: "ESG-2023-004", bankId:4, period:"Q3 2023", scope1:1100, scope2:3200, scope3:16500, score:69 }
                    ]));
                }
            },
            getBanks: function() {
                return JSON.parse(localStorage.getItem('esg_banks') || '[]');
            },
            getReports: function() {
                return JSON.parse(localStorage.getItem('esg_reports') || '[]');
            },
            saveReport: function(reportData) {
                const reports = this.getReports();
                const newId = `ESG-${new Date().getFullYear()}-${String(reports.length+1).padStart(3,'0')}`;
                const newReport = { id: newId, ...reportData, createdAt: new Date().toISOString() };
                reports.push(newReport);
                localStorage.setItem('esg_reports', JSON.stringify(reports));
                return newReport;
            }
        };

        // --- CHART INITIALIZATION FUNCTION (GLOBAL SCOPE) ---
        function initPredictionChart(scope1, scope2, scope3, greenScore) {
            const ctx = document.getElementById('prediction-chart').getContext('2d');
            
            const currentYear = new Date().getFullYear();
            const years = [currentYear, currentYear+1, currentYear+2];
            
            const scope1Data = [scope1, scope1 * 0.85, scope1 * 0.72];
            const scope2Data = [scope2, scope2 * 0.78, scope2 * 0.65];
            const scope3Data = [scope3, scope3 * 0.82, scope3 * 0.68];
            const greenScoreData = [greenScore, Math.min(100, greenScore * 1.25), Math.min(100, greenScore * 1.45)];
            
            if (window.predictionChart) {
                window.predictionChart.destroy();
            }
            
            window.predictionChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: years,
                    datasets: [
                        { label: 'Scope 1 Emissions', data: scope1Data, borderColor: '#1a5d1a', backgroundColor: 'rgba(26, 93, 26, 0.1)', tension: 0.3, fill: false },
                        { label: 'Scope 2 Emissions', data: scope2Data, borderColor: '#4caf50', backgroundColor: 'rgba(76, 175, 80, 0.1)', tension: 0.3, fill: false },
                        { label: 'Scope 3 Emissions', data: scope3Data, borderColor: '#00796b', backgroundColor: 'rgba(0, 121, 107, 0.1)', tension: 0.3, fill: false },
                        { label: 'Green Portfolio Score', data: greenScoreData, borderColor: '#8bc34a', backgroundColor: 'rgba(139, 195, 74, 0.1)', tension: 0.3, fill: false, borderDash: [5, 5] }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: { display: true, text: '3-Year ESG Performance Forecast', font: { size: 16 } },
                        tooltip: { mode: 'index', intersect: false },
                        legend: { position: 'top' }
                    },
                    scales: {
                        y: { beginAtZero: true, title: { display: true, text: 'Metrics' } },
                        x: { title: { display: true, text: 'Year' } }
                    }
                }
            });
        }


        // --- CALCULATION FUNCTIONS (re-ordered to be at the top) ---
        function hideAllResultCards() {
            document.getElementById('scope1-card').classList.add('hidden');
            document.getElementById('scope2-card').classList.add('hidden');
            document.getElementById('scope3-card').classList.add('hidden');
            document.getElementById('green-score-card').classList.add('hidden');
        }

        // Combined Summary Calculation Function
        function calculateCombined() {
            const energy = parseFloat(document.getElementById('energy').value) || 0;
            const fleet = parseFloat(document.getElementById('fleet').value) || 0;
            const portfolio = parseFloat(document.getElementById('portfolio').value) || 0;
            const scope3Type = document.getElementById('scope3-type').value;
            const scope3Value = parseFloat(document.getElementById('scope3-value').value) || 0;
            const greenPercentage = parseFloat(document.getElementById('green-percentage').value) || 0.5;
            
            let scope3;
            switch(scope3Type) {
                case 'financed': scope3 = portfolio * scope3Value * 0.85; break;
                case 'travel':   scope3 = scope3Value * 0.12; break;
                case 'supply':   scope3 = scope3Value * 0.35; break;
                case 'waste':    scope3 = scope3Value * 0.08; break;
                case 'other':    scope3 = scope3Value * 0.15; break;
            }
            
            const scope1 = (fleet * 1.2);
            const scope2 = (energy * 0.233) / 1000; 
            const greenScore = Math.min(100, Math.round(greenPercentage * 100 + (Math.random() * 10)));
            
            const complianceScore = Math.min(100, Math.max(20, 
                70 - (scope1/10) - (scope2/10) - (scope3/1000) + (greenScore/2)
            ));
            
            document.getElementById('scope1-result').textContent = scope1.toFixed(2) + ' tCO2e';
            document.getElementById('scope2-result').textContent = scope2.toFixed(2) + ' tCO2e';
            document.getElementById('scope3-result').textContent = scope3.toFixed(2) + ' tCO2e';
            document.getElementById('green-score').textContent = greenScore + '%';
            document.getElementById('compliance-bar').style.width = complianceScore.toFixed(0) + '%';
            
            const reportData = {
                bankId: 0,
                period: `Q${Math.floor((new Date().getMonth() + 3) / 3)} ${new Date().getFullYear()}`,
                scope1: scope1,
                scope2: scope2,
                scope3: scope3,
                greenScore: greenScore,
                complianceScore: complianceScore,
                scope3Type: scope3Type
            };
            
            ESGDatabase.saveReport(reportData);
            
            hideAllResultCards();
            document.getElementById('scope1-card').classList.remove('hidden');
            document.getElementById('scope2-card').classList.remove('hidden');
            document.getElementById('scope3-card').classList.remove('hidden');
            document.getElementById('green-score-card').classList.remove('hidden');
                    
            initPredictionChart(scope1, scope2, scope3, greenScore);
            document.getElementById('results-modal').style.display = 'block';
        }

        function calculateScope1() {
            const diesel  = parseFloat(document.getElementById('diesel-1').value)      || 0;
            const petrol  = parseFloat(document.getElementById('petrol-1').value)      || 0;
            const lpg     = parseFloat(document.getElementById('lpg-1').value)         || 0;
            const gas     = parseFloat(document.getElementById('natural-gas-1').value) || 0;
            const refType = document.getElementById('refrigerant-type-1').value;
            const refVal  = parseFloat(document.getElementById('refrigerant-value-1').value) || 0;

            const dieselKG = diesel * 2.5189;
            const petrolKG = petrol * 2.3149;
            const lpgKG    = lpg    * 1.5273;
            const gasKG    = gas    * 0.18316;
            const GWP      = { r410a:2088, r134a:1430, r32:675 };
            const refKG    = refVal * (GWP[refType] || 0);
            const scope1   = (dieselKG + petrolKG + lpgKG + gasKG + refKG) / 1000;

            hideAllResultCards();
            document.getElementById('scope1-card').classList.remove('hidden');

            initPredictionChart(scope1, 0, 0, 0);
            document.getElementById('scope1-result').textContent = scope1.toFixed(2) + ' tCO₂e';
            document.getElementById('scope2-result').textContent = '0 tCO₂e';
            document.getElementById('scope3-result').textContent = '0 tCO₂e';
            document.getElementById('green-score').textContent   = '0%';
            document.getElementById('compliance-bar').style.width = '0%';
            
            document.getElementById('results-modal').style.display = 'block';
        }

        function calculateScope2() {
            const energy = parseFloat(document.getElementById('energy-2').value) || 0;
            const scope2 = (energy * 0.233) / 1000;

            hideAllResultCards();
            document.getElementById('scope2-card').classList.remove('hidden');

            initPredictionChart(0, scope2, 0, 0);
            document.getElementById('scope1-result').textContent = '0 tCO₂e';
            document.getElementById('scope2-result').textContent = scope2.toFixed(2) + ' tCO₂e';
            document.getElementById('scope3-result').textContent = '0 tCO₂e';
            document.getElementById('green-score').textContent   = '0%';
            document.getElementById('compliance-bar').style.width = '0%';
            document.getElementById('results-modal').style.display = 'block';
        }

        function calculateScope3() {
            const portfolio    = parseFloat(document.getElementById('portfolio-3').value) || 0;
            const scope3Type   = document.getElementById('scope3-type-3').value;
            const scope3Value  = parseFloat(document.getElementById('scope3-value-3').value) || 0;
            const greenPercent = parseFloat(document.getElementById('green-percentage-3').value) || 0;

            let scope3;
            switch (scope3Type) {
                case 'financed': scope3 = portfolio * scope3Value * 0.85; break;
                case 'travel':   scope3 = scope3Value * 0.12; break;
                case 'supply':   scope3 = scope3Value * 0.35; break;
                case 'waste':    scope3 = scope3Value * 0.08; break;
                default:         scope3 = scope3Value * 0.15; break;
            }
            const greenScore = Math.min(100, Math.round(greenPercent * 100 + (Math.random() * 10)));

            hideAllResultCards();
            document.getElementById('scope3-card').classList.remove('hidden');
            document.getElementById('green-score-card').classList.remove('hidden');

            initPredictionChart(0, 0, scope3, greenScore);
            document.getElementById('scope1-result').textContent = '0 tCO₂e';
            document.getElementById('scope2-result').textContent = '0 tCO₂e';
            document.getElementById('scope3-result').textContent = scope3.toFixed(2) + ' tCO₂e';
            document.getElementById('green-score').textContent   = greenScore + '%';
            document.getElementById('compliance-bar').style.width = greenScore + '%';
            document.getElementById('results-modal').style.display = 'block';
        }


        // --- MAIN SCRIPT EXECUTION ---
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize database
            ESGDatabase.init();

            // --- Chart Initialization ---
            const aiCtx = document.getElementById('ai-chart').getContext('2d');
            const aiChart = new Chart(aiCtx, {
                type: 'radar',
                data: {
                    labels: ['Green Lending', 'Compliance', 'Emissions', 'ROI', 'Risk Mgmt', 'Innovation'],
                    datasets: [{
                        label: 'Current Portfolio',
                        data: [35, 42, 65, 38, 55, 30],
                        fill: true,
                        backgroundColor: 'rgba(139, 195, 74, 0.2)',
                        borderColor: 'rgb(139, 195, 74)',
                        pointBackgroundColor: 'rgb(139, 195, 74)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(139, 195, 74)'
                    }, {
                        label: 'AI Optimized',
                        data: [82, 88, 30, 72, 85, 75],
                        fill: true,
                        backgroundColor: 'rgba(26, 93, 26, 0.2)',
                        borderColor: 'rgb(26, 93, 26)',
                        pointBackgroundColor: 'rgb(26, 93, 26)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(26, 93, 26)'
                    }]
                },
                options: {
                    scales: {
                        r: {
                            angleLines: { display: true },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        legend: { position: 'top' },
                        title: { display: true, text: 'Portfolio ESG Performance Analysis' }
                    }
                }
            });

            // ——— Tab switching logic ———
            document.querySelectorAll('.scope-tab').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.scope-tab').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    const scope = btn.getAttribute('data-scope');
                    document.querySelectorAll('.scope-panel').forEach(p => p.classList.remove('active'));
                    document.getElementById(`scope-${scope}-panel`).classList.add('active');
                });
            });

            // ——— Main Calculate button handler ———
            document.getElementById('calculate-btn').addEventListener('click', e => {
                e.preventDefault();
                const activeScope = document.querySelector('.scope-tab.active').getAttribute('data-scope');
                if (activeScope === 'summary') calculateCombined();
                else if (activeScope === '1') calculateScope1();
                else if (activeScope === '2') calculateScope2();
                else if (activeScope === '3') calculateScope3();
            });
            
            document.getElementById('close-modal').addEventListener('click', function() {
                document.getElementById('results-modal').style.display = 'none';
            });
            
            document.getElementById('results-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.style.display = 'none';
                }
            });

            document.getElementById('contact-btn').addEventListener('click', function(e) {
                e.preventDefault();
                document.getElementById('results-modal').style.display = 'none';
                const targetElement = document.querySelector('#contact');
                if (targetElement) {
                    window.scrollTo({
                    top: targetElement.offsetTop - 80,
                    behavior: 'smooth'
                    });
                }
            });
            
            const contactForm = document.getElementById('contact-form');
            if (contactForm) {
                contactForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    alert('Thank you for your request! Our AI specialists will contact you shortly.');
                    contactForm.reset();
                });
            }
            
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            });
            
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.1
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animated');
                    }
                });
            }, observerOptions);
            
            document.querySelectorAll('.section-header, .scope-card, .step, .resource-card').forEach(el => {
                observer.observe(el);
            });
            
            document.getElementById('admin-login-link').addEventListener('click', function(e) {
                e.preventDefault();
                document.getElementById('main-app').style.display = 'none';
                document.getElementById('login-section').style.display = 'flex';
            });
            
            document.getElementById('admin-login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('admin-email').value;
                const password = document.getElementById('admin-password').value;
                
                if (email === 'admin@nextzerohub.co.uk' && password === 'securepassword') {
                    document.getElementById('login-section').style.display = 'none';
                    document.getElementById('admin-panel').style.display = 'block';
                    
                    document.getElementById('banks-count').textContent = ESGDatabase.getBanks().length;
                    document.getElementById('reports-count').textContent = ESGDatabase.getReports().length;
                    
                    const reports = ESGDatabase.getReports();
                    if (reports.length > 0) {
                        const total = reports.reduce((sum, report) => sum + report.score, 0);
                        const avg = Math.round(total / reports.length);
                        document.getElementById('avg-score').textContent = `${avg}%`;
                    }
                } else {
                    alert('Invalid credentials. Please try again.');
                }
            });

            document.getElementById('login-back-to-main').addEventListener('click', function() {
                document.getElementById('login-section').style.display = 'none';
                document.getElementById('main-app').style.display = 'block';
                document.getElementById('admin-login-form').reset();
            });
            
            document.getElementById('back-to-main').addEventListener('click', function() {
                document.getElementById('admin-panel').style.display = 'none';
                document.getElementById('main-app').style.display = 'block';
            });
            
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.style.display = 'none';
                    });
                    const tabName = this.getAttribute('data-tab');
                    document.getElementById(`${tabName}-content`).style.display = 'block';
                });
            });
            
            const scope3Type = document.getElementById('scope3-type');
            const scope3Label = document.getElementById('scope3-value-label');
            const scope3Input = document.getElementById('scope3-value');
            const scope3Helper = document.getElementById('scope3-helper');
            
            function configureScope3Input() {
                const type = scope3Type.value;
                switch(type) {
                    case 'financed':
                        scope3Label.textContent = 'Carbon Intensity Factor';
                        scope3Input.placeholder = 'Enter tCO₂e per £ million';
                        scope3Helper.textContent = 'Metric tons CO₂e per £ million financed (UK avg: 15-30)';
                        break;
                    case 'travel':
                        scope3Label.textContent = 'Annual Travel Distance';
                        scope3Input.placeholder = 'Enter kilometers traveled';
                        scope3Helper.textContent = 'Total kilometers traveled per year (UK bank avg: 500k-2M km)';
                        break;
                    case 'supply':
                        scope3Label.textContent = 'Supply Chain Spend';
                        scope3Input.placeholder = 'Enter annual spend in £';
                        scope3Helper.textContent = 'Total annual supply chain spend in £ (UK bank avg: £5M-20M)';
                        break;
                    case 'waste':
                        scope3Label.textContent = 'Waste Generated';
                        scope3Input.placeholder = 'Enter tons of waste';
                        scope3Helper.textContent = 'Total tons of waste generated annually (UK bank avg: 100-500 tons)';
                        break;
                    case 'other':
                        scope3Label.textContent = 'Activity Metric';
                        scope3Input.placeholder = 'Enter activity value';
                        scope3Helper.textContent = 'Relevant metric for the activity (e.g., units, quantity)';
                        break;
                }
            }
            scope3Type.addEventListener('change', configureScope3Input);
            configureScope3Input();

            const scope3Type3 = document.getElementById('scope3-type-3');
            const scope3Label3 = document.getElementById('scope3-value-3-label');
            const scope3Input3 = document.getElementById('scope3-value-3');
            const scope3Helper3 = document.getElementById('scope3-helper-3');
            
            function configureScope3TabInputs() {
                const type = scope3Type3.value;
                switch(type) {
                    case 'financed':
                        scope3Label3.textContent = 'Carbon Intensity Factor';
                        scope3Input3.placeholder = 'Enter tCO₂e per £ million';
                        scope3Helper3.textContent = 'Metric tons CO₂e per £ million financed (UK avg: 15-30)';
                        break;
                    case 'travel':
                        scope3Label3.textContent = 'Annual Travel Distance';
                        scope3Input3.placeholder = 'Enter kilometers traveled';
                        scope3Helper3.textContent = 'Total kilometers traveled per year (UK bank avg: 500k-2M km)';
                        break;
                    case 'supply':
                        scope3Label3.textContent = 'Supply Chain Spend';
                        scope3Input3.placeholder = 'Enter annual spend in £';
                        scope3Helper3.textContent = 'Total annual supply chain spend in £ (UK bank avg: £5M-20M)';
                        break;
                    case 'waste':
                        scope3Label3.textContent = 'Waste Generated';
                        scope3Input3.placeholder = 'Enter tons of waste';
                        scope3Helper3.textContent = 'Total tons of waste generated annually (UK bank avg: 100-500 tons)';
                        break;
                    case 'other':
                        scope3Label3.textContent = 'Activity Metric';
                        scope3Input3.placeholder = 'Enter activity value';
                        scope3Helper3.textContent = 'Relevant metric for the activity (e.g., units, quantity)';
                        break;
                }
            }
            scope3Type3.addEventListener('change', configureScope3TabInputs);
            configureScope3TabInputs();
        });
    </script>
</body>
</html>
